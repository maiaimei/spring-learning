# PostProcessor

在Spring扩展接口的执行顺序中，首先执行BeanDefinitionRegistryPostProcessor，其次执行BeanFactoryPostProcessor，最后执行BeanPostProcessor。

BeanDefinitionRegistryPostProcessor继承自BeanFactoryPostProcessor，其postProcessBeanDefinitionRegistry方法执行时机早于BeanFactoryPostProcessor的postProcessBeanFactory方法。

BeanFactoryPostProcessor与BeanPostProcessor的主要区别在于操作对象和执行时机。BeanFactoryPostProcessor操作的是BeanDefinition（配置元数据），在Bean实例化之前执行；而BeanPostProcessor操作的是已创建的Bean实例，在Bean初始化前后执行。

## 主要BeanFactoryPostProcessor及其功能

PropertySourcesPlaceholderConfigurer是Spring中最典型的BeanFactoryPostProcessor实现之一，它负责处理属性占位符替换。该处理器会读取外部属性文件，遍历所有BeanDefinition，将其中的占位符（如${jdbc.url}）替换为真实的属性值。

ConfigurationClassPostProcessor是另一个关键的BeanFactoryPostProcessor，它专门处理基于注解的配置类。该处理器负责解析@Configuration注解的类，将其中的@Bean方法转换为BeanDefinition，从而支持Java配置方式。

## 主要BeanPostProcessor及其功能

ApplicationContextAwareProcessor‌负责处理各种Aware接口的回调，包括BeanNameAware、BeanFactoryAware和ApplicationContextAware等。它会在Bean初始化之前执行，为Bean注入相关的容器信息。

AutowiredAnnotationBeanPostProcessor‌是实现依赖注入的核心处理器，专门处理@Autowired、@Value、@Inject等注解。它会在Bean实例化后、初始化前进行属性注入操作。

CommonAnnotationBeanPostProcessor‌支持JSR-250标准注解的处理，包括@PostConstruct、@PreDestroy、@Resource等。其中@PostConstruct标注的方法会在Bean初始化后执行。

PersistenceExceptionTranslationPostProcessor‌用于持久层异常转换，将特定持久化框架的异常转换为Spring的统一数据访问异常。